## Описание проекта Posy message:
### Разработка сайта для доставки цветов и Telegram бота

---
### Описание:

Для реализации проекта была придумана компания Posy message занимающаяся продажей букетов.
В рамках проекта был создан простой веб-сайт для заказа букетов и Telegram-бот со схожим функционалом.

---
### Структура:

До описания подсистем я бы хотел ознакомить Вас со структурой моего проекта.
В структуре отражены только важные файлы, которые обеспечивают работоспособность моего проекта. 
В корневой папке проекта (у меня `DiplomaProject`) содержатся:
- **posymess/**
  - **posymess/**
    - `settings.py` 
  - **main/** 
    - **management/**
      - **commands/**
        - `bot.py`
        - `keyboards.py`
        - `support.py`
    - **migrations/**
      - `0001_initial.py`
    - **static/**
      - **main/**
        - **css/**
          - `posy_style.css` 
        - **img/**
          - **posies/**
            - `small_01.png ... small_08.png`
          - `location.png ...`
      - **templates/**
        - **main/**
          - `bond.html`
          - `flowers.html`
          - `header.html`
          - `layout.html`
          - `login.html`
          - `navbar.html`
          - `orders.html`
          - `register.html`
      - `__ init __.py`
      - `admin.py`
      - `forms.py`
      - `models.py`
      - `tests.py`
      - `urls.py`
      - `views.py`

---
### Подсистемы и модули:

Поскольку предполагался простой проект, я реализовал весь функционал в приложении main, —
это видно по структуре проекта. В проекте можно выделить несколько подсистем:

**1. Telegram-бот**

**2. Обеспечение работы сайта**

**3. Работа с базой данных**

**4. Маленкая подсистемка Unit-тестов**

### Модули проекта:

**1. Telegram-бот**
   
   Представлен основным файлом `bot.py` и двумя вспомогательными файлами `keyboards.py` и `support.py`
   - Файл `keyboards.py` содержит модели reply-клавиатур.
   - Файл `support.py` содержит несколько вспомогательных функций.

**2. Работа сайта**

   Тут можно выделить три файла: `froms.py`, `views.py`, `urls.py` реализующих разные аспекты работы сайта.
   
   - Файл `forms.py` содержит логику работы с формами сайта, а также первичную проверку введённых данных.

   - Файл `views.py`, фактически обеспечивает работу всей логики сайта. Он производит окончательную проверку
   данных из форм и запись их в базу данных, автоматическое заполнение таблицы `main_flower` в БД, создание, удаление
   и просмотр заказов. 

  Визуальное представление web-страниц содержится в соответствующих HTML-файлах. Оформление выполнено с помощью Bootstrap и
  CSS. HTML-файлы адаптированы для использования с шаблонизатором Jinja, он осуществляет окончательное формирование web-страниц.

**3. Работа с базой данных**

  В проекте используется база данных SQLite. Для работы с ней используется ORM Django. Модели таблиц содержатся файле `models.py`.
  К ним были применены миграции Django и окончательная миграция в базу данных. Эти этапы выполнялись Django в автоматическом режиме.

  В этом разделе я бы хотел коснуться непосредственно моделей таблиц и их взаимосвязей.
  
  Главной таблицей проекта, несомненно, является User я использовал *кастомного* пользователя унаследованного мной от AbstractUser.
  Это позволило мне сделать регистрацию по адресу электронной почты и не использовать уникальные имена.

  Таблица Flower является моделью для хранения информации о цветках. Она содержит название, цену, путь к фото и id фото для Telegram.
  Мне не хватило времени для реализации показа фото в Telegram. Поэтому поле telegram_id оставил в таблице для дальнейшего развития проекта.

  Завершающей, но не по значению, является Order — таблица заказов. В ней используются ForeignKey для получения данных о пользователях и цветах.
  Также в таблице есть поля для даты, времени и цены заказа. Время в базе данных хранится в UTC. К сожалению, jinja не позволил мне использовать в
  HTML-шаблоне вспомогательную функцию `get_local_time` поэтому время на странице заказов также отображается в UTC. 

---
### Функционал

В проекте реализован следующий функционал:

**Web-сайт:**

- Регистрация и авторизация пользователей;
- Просмотр каталога цветов;
- Оформление заказов;
- Отмена заказов.

**Telegram бот:**

- Авторизация пользователей по email;
- Просмотр и удаление заказов;
- Оформление заказов по информации о названии букета и цене.

---
### Архитектура и идеи по улучшению

**Общая архитектура системы:**
 
- Веб-приложение на Django;
- Серверная часть на Python с использованием Django.

**Идеи по улучшению:**

- Telegram-бот:
  - Добавление фото букетов в Telegram-бота.


- Web-сайт:
  - Сделать проверку данных форм с помощью JS на стороне клиена, что позаолит мнизиь нагрузку на сервер;
  - Добавление миниатюр с букетами на страницу заказов;
  - Отказ от карусели для выбора букета;
  - Добавление менеджмента заказов — исполненные, отменённые, в работе;  
  - Добавить сервисы доставки до двери.